<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.1" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.1" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="stone" type="application/atom+xml" />






<meta property="og:type" content="website">
<meta property="og:title" content="分类">
<meta property="og:url" content="https://limqvip.github.io/categories/index.html">
<meta property="og:site_name" content="stone">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-08-22T01:40:12.252Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="分类">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://limqvip.github.io/categories/"/>





  <title>Linux Shell  编程基础 | stone</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?51abc1331927d6a2fba4b10a0f9e3ab9";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
     

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">stone</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />搜索</a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://limqvip.github.io/2018/08/24/Linux-Shell-jichu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Limq">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="stone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Linux Shell  编程基础</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-24T23:13:56+08:00">2018-08-24</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-08-24T23:26:12+08:00">2018-08-24</time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Program/" itemprop="url" rel="index">
                    <span itemprop="name">Program</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Program/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i> 浏览
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          

          
              <div class="post-description">
                  Linux&#58; 本文介绍 Linux 常用 Shell 命令及简单 Shell 脚本。
              </div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="第一讲"><a href="#第一讲" class="headerlink" title="第一讲"></a>第一讲</h2><p>zh_CN.GB18030<br><code>cat /etc/shells</code> 可以查看系统的 shell 种类。<code>echo $SHELL</code> 查看当前使用的shell。在当前shell中运行其它shell，例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /bin/csh ls -lh。 </span></span><br><span class="line">chomod u=rwx,g+w,o+r file </span><br><span class="line">chown -R jack /etc/<span class="built_in">test</span>/ <span class="comment">#把这个目录下所有的子目录和文件的拥有者都改变成jack</span></span><br></pre></td></tr></table></figure>
<p>把这个目录下所有的子目录和文件的拥有者都改变成jack。</p>
<p><code>chown jack.jack /etc/test/ -R</code><br>umask   文件   目录<br>0    6    7<br>1    5    6<br>2    4    5<br>3    3    4<br>4    2    3<br>5    1    2<br>6    0    1<br>7    0    0<br>/etc/profile 文件中可以设定 umask 值。</p>
<p><code>alias ll=&#39;ls -alh&#39;</code></p>
<p><code>cat $HOME/.bashrc</code> , 别名都放在这个文件中。</p>
<p>命令替换：<code>ls \</code>cat myfile` -al`，这个反引号就是1左边的键，把myfile的内容输出到ls的输入。<br>后台运行：# nohup tar -czf abc.tar.gz /etc/abc/ &amp;。jobs -l查看后台运行情况。<br>模式匹配：ls *.txt -l。</p>
<h2 id="第二讲"><a href="#第二讲" class="headerlink" title="第二讲"></a>第二讲</h2><p>本地变量在用户现在的shell生命期的脚本中使用，例在当前shell中设置变量，ABC=123，然后exit退出当前shell，再进入系统用set指令(显示本地变量)发现ABC变量无。readonly ABC，把ABC设置成只读变量。只是用readonly指令显示当前shell中有哪些只读变量。</p>
<p>环境变量用于所有用户进程（经常称为子进程）。登录进程称为父进程，shell中执行的用户进程均称为子进程。不像本地变量(只用于现在的shell)环境变量可用于所有子进程，这包括编辑器，脚本和应用。<br>$HOME/.bash_profile(/etc/profile)<br>export，例：export ABC=”shell program”，把ABC这个变量变成环境变量。直接输入export也可以查看环境变量有哪些。readonly ABC，把环境变量ABC变成只读的。</p>
<p>变量替换：<br>${var name}    显示实际值到var name<br>${var name:+value}    如果设置了var name，则显示其值value，否则为空<br>${var name:?value}    如果未设置var name，显示用户定义错误信息value<br>${var name:-value}    如果未设置var name，显示其值value，如果设置了var name则显示var name的值<br>${var name:=value}    如果未设置var name，设置其值并显示，如果设置了var name则显示var name的值<br>env<br>unset ABC，删除ABC变量，但是用readonly声明的变量是不能被unset的。</p>
<p>位置变量：先看下面的脚本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#parms</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"program name is <span class="variable">$0</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"1 parm is <span class="variable">$1</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"2 parm is <span class="variable">$2</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"3 parm is <span class="variable">$3</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"4 parm is <span class="variable">$4</span>"</span></span><br></pre></td></tr></table></figure>
<p>然后运行这个脚本：./parms a b c d，就会显示结果,$0表示脚本名称，$1-9分别表示位置变量名，在运行脚本时代入脚本中。<br>再例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#parm.sh</span></span><br><span class="line">find /home/chinaitlab/shell -name <span class="variable">$1</span> -<span class="built_in">print</span></span><br></pre></td></tr></table></figure>
<p>然后运行这个脚本: <code>./parm.sh abc.txt</code> 。</p>
<p>标准变量：bash 默认建立了一些标准环境变量，可在 /etc/profile 中定义。<br> EXINIT，运行 vi 时初始化设置一些参数<br>HOME<br>IFS<br>LOGNAME<br>MAIL<br>MAILCHECK<br>MAILPATH<br>PATH<br>PS1<br>PS2<br>SHELL<br>TERMINFO<br>TERM<br>TZ<br>EDITOR<br>PWD<br>MANPATH</p>
<p>特殊变量：<br>$#(传递到脚本的参数个数)<br>$*(以一个单字符串显示所有向脚本传递的参数。与位置变量不同，此选项参数可超过9个)<br>$$(脚本运行的当前进程ID号)<br>$!(后台运行的最后一个进程的进程ID号)<br>$@(与$#相同，但是使用时加引号，并在引号中返回每个参数)<br>$-(显示shell使用的当前选项，与set命令功能相同)<br>$?(显示最后命令的推出状态。0表示没有错误，其它任何值表明有错误)</p>
<p>影响变量的命令：<br>declare<br>-设置或显示变量<br>-f 只显示函数名<br>-r 创建只读变量(declare和typeset)<br>-x 创建转出变量<br>-i 创建整数变量</p>
<ul>
<li>使用+替代-，可以颠倒选项的含义<br>export<br>-用于创建传给予shell的变量(环境变量)</li>
<li>–表明选项结束，所有后续参数都是实参</li>
<li>-f表明在”名-值”对中的名字是函数名</li>
<li>-n把全局变量转换成局部变量，换句话说，命令的变量不再传给shell</li>
<li>-p显示全局变量列表<br>unset</li>
<li>用于取消变量的定义</li>
<li>–表明选项结束</li>
<li>-f删除只读变量，但不能取消从shell环境中删除指定的变量和函数如：PATH，PS1，PS2，PPID，UID，EUID等的设置。<br>shift[n]</li>
<li>用于移动位置变量，调整位置变量，使$3的值赋予$2,$2的值赋予$1。<br>typeset<br>-用于显示或设置变量<br>-是declare的同义词</li>
</ul>
<p>引号：<br>使用双引号可以引用除字符$,<code>(反引号),\外的任意字符或字符串。例：echo -e &quot;ert, $SHELL&#39;\n* china</code>echo itlab<code>&quot;。
单引号会忽略其中所有的特殊含义的字符，例：echo &#39;ert, $SHELL * china</code>echo itlab`’。<br>反引号用于设置系统命令的输出到变量，shell将反引号中的内容作为一个系统命令，并执行其内容。<br>反斜杠：如果一个字符有特殊含义，反斜杠防止shell误解其含义，即屏蔽其特殊含义，这些字符有特殊含义： $,<em>,+,&amp;,”,|,?,^例：echo </em>，显示当前目录下的所有文件名，echo *，则显示*。</p>
<p>运算符类型：<br>按位运算符    ~,&lt;&lt;,&gt;&gt;,&amp;,|,^<br>运算符        说明<br>~op1        反运算符，把op1中所有的二进制为1变为0，0变为1<br>op1&lt;<op2 左移运算符，把op1中的二进制位向左移动op2位，忽略最左端移出的各位，最右端的各位补0值，每做一次按位左移就有实现op1乘以2。="" op1="">&gt;op2    右移运算符，把op1中的二进制位向右移动op2位，忽略最右端移出的各位，最左端的各位补0值，每做一次按位右移就有实现op1除以2。<br>op1&amp;op2        与比较运算符，op1和op2对应位，对于每个二进制位来说，如果二者该位都是1，则结果为1，否则为0。<br>op1^op2        异或运算符，op1和op2对应位，对于每个二进制位来说，如果二者该位互补，则结果为1否则为0。<br>op1|op2        或运算符。<br>$[]表示形式告诉shell对方括号中的表达式求值，例：echo $[2+8]，echo $[2&gt;&gt;8]，echo $[2&lt;&lt;4]，echo $[2^4]，echo $[~3]。<br>逻辑运算符：&amp;&amp;,||,&gt;,==,&lt;,!=例：echo $[2&amp;&amp;2]，echo $[1||0]。<br>赋值运算符：=,+=,-=,*=,/=,%=,&amp;=,^=,|=,&lt;&lt;=,&gt;&gt;=<br>let $count=$count+$change<br>let $count+=$change<br>$[]可以接受不同基数的数字</op2></p>
<ul>
<li>[ base#n ] n表示基数从2到36的任何基数，例：echo $[10#8+1]，8进制的10加上1，结果为9。</li>
</ul>
<h2 id="第三讲-Shell-输入与输出"><a href="#第三讲-Shell-输入与输出" class="headerlink" title="第三讲 Shell 输入与输出"></a>第三讲 Shell 输入与输出</h2><p>echo [option] string</p>
<ul>
<li>e解析转义字符</li>
<li>-n回车不换行，linux系统默认回车换行，例：echo “hello”和echo -n “hello”的区别。</li>
<li>string中的转义符(\c,\f,\t,\n)，\c表示回车不换行，\f表示禁止，\t表示跳格(tab)，\n表示回车换行<br>例：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#echod</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"This echo's 3 new lines\n\n\n"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"OK"</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"This echo's 3 new lines\n\n\n"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"The log files have all been done"</span>&gt;mylogfile.txt</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>read语句可以从键盘或文件的某一行文本中读入信息，并将其赋给一个变量。<br>read var1 var2…<br>-如果只指定了一个变量，那么read将会把所有的输入赋给该变量，直至遇到第一个文件结束符或回车；如果给出了多个变量，他们按顺序分别被赋予不同的变量。shell将用空格作为变量之间的分隔符。<br>例：</p>
<p>#!/bin/bash</p>
<p>#readname<br>echo -n “First name:”<br>read firstname<br>echo -n “Last name:”<br>read lastname<br>echo -e “Your First Name is :${firstname}\n”<br>echo -e “Your Last Name is :${lastname}\n”</p>
<p>cat可显示文件内容，创建文件还可以显示控制字符。<br>cat [options] file1 file2…</p>
<ul>
<li>-v显示控制字符<br>使用cat命令时要注意，它不会在文件分页符处停下来，它会一下显示完整个文件，如果希望每次显示一页，可以使用more。例：cat file1 file2 file3，会在屏幕上同时显示三个文件的内容，cat file1 file2 file3&gt;file123，会把这三个文件的内容合并到一个文件file123中，cat -v dos.txt，显示这个windows下生成的文件，并显示控制字符(这些控制字符是在windows生成这个文件时加入的)。<br>管道举例：df -k|awk ‘{print $1}’|grep -v “Filesystem”。<br>tee命令把输出的一个副本输送到标准输出，另一个副本拷贝到相应的文件中。<br>tee -a files</li>
<li>如果希望在看到输出的同时，也将其存入一个文件，那么这个命令再合适不过了，一般用于管道之后，-a参数表示追加写入files中，如果没有-a参数，则覆盖写入这个文件中。例：who | tee -a who.out。</li>
</ul>
<p>标准输入输出和错误<br>在shell中执行命令时，每个进程都和三个打开的文件相联系，并使用文件描述符来引用这些文件，由于文件描述符不容易记忆，shell同时给出了相应的文件名。<br>文件            文件描述符<br>输入文件-标准输入    0(缺省是键盘，也可以是文件或其它命令的输出)<br>输出文件-标准输出    1(缺省是屏幕，也可以是文件)<br>错误输出文件-标准错误    2(缺省是屏幕，也可以是文件)<br>系统中实际上有12个文件描述符，可以任意使用文件描述符3到9。</p>
<p>文件重定向<br>command &gt; file        把标准输出重定向到一个新文件中<br>command &gt;&gt; file        把标准输出重定向到一个文件中(追加)<br>command 1 &gt; file    把标准输出重定向到一个文件中<br>command &gt; file 2&gt;&amp;1    把标准输出和标准错误一起重定向到一个文件中<br>command 2 &gt; file    把标准错误重定向到一个文件中<br>command 2&gt;&gt; file    把标准输出重定向到一个文件中(追加)<br>command &gt;&gt; file 2&gt;&amp;1    把标准输出和标准错误一起重定向到一个文件中(追加)<br>command &lt; file &gt; file2    command命令以file作为标准输入，file2文件作为标准输出<br>command &lt; file        command命令以file作为输入<br>command &lt;&lt; dclimiter    从标准输入中读入，直至遇到dclimiter分界符<br>command &lt; &amp;m        把文件描述符m作为标准输入<br>command &gt; &amp;m        把标准输出重定向到文件描述符m中<br>command &lt; &amp;-        关闭标准输入<br>例：&gt;nullfile，创建一个新的空文件。sort &lt; file，把file作为输入源，排序然后输出到屏幕上。sort &lt; name.txt &gt; name.out。cat account_new.txt account_old.txt 1&gt;accounts.out 2&gt;accounts.err，account_new.txt存在，account_old.txt不存在，那么accounts.out将包含account_new.txt的内容，不会包含account_old.txt的内容，account_old.txt不存在的错误信息会写入accounts.err中。<br>合并标准输出和标准错误的时候，切忌shell是从左至右分析相应的命令，例：grep “standard” standard.txt &gt; grep.out 2&gt;&amp;1。</p>
<p>exec命令可以用来替代当前shell；换句话说，并没有启动子shell，使用这一命令时任何现有环境都会被清除，并重新启动一个shell。<br>exec command<br>-其中的command通常是一个shell脚本。<br>对文件描述符进行操作的时候(也只有在这时)，它不会覆盖你当前的shell。</p>
<p>文件描述符：<br>3-9文件描述符<br>exec与文件描述符的结合<br>例：</p>
<p>#!/bin/bash</p>
<p>#file_desc<br>exec 3&lt;&amp;0 0&lt;name.txt<br>read line1<br>read line2<br>exec 0&lt;&amp;3<br>echo $line1<br>echo $line2</p>
<h2 id="第四讲-控制流结构"><a href="#第四讲-控制流结构" class="headerlink" title="第四讲 控制流结构"></a>第四讲 控制流结构</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件1</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	命令1</span><br><span class="line"><span class="keyword">elif</span> 条件2</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	命令2</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	命令3</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#if test</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"10"</span> -lt <span class="string">"12"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"yes,10 is less than 12"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>可以使用man test获得条件的帮助。<br>再例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#iftest2</span></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">"Enter your name:"</span></span><br><span class="line"><span class="built_in">read</span> NAME</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$NAME</span>"</span> == <span class="string">""</span> ];<span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"You did not enter your name"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>再例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#ifcp</span></span><br><span class="line"><span class="keyword">if</span> cp myfile.bak myfile;<span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"good copy"</span></span><br><span class="line"><span class="keyword">else</span> <span class="built_in">echo</span> <span class="string">"basename <span class="variable">$0</span>:error could not copy files"</span> &gt;&amp;2</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>再例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#ifelif</span></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">"Enter your name:"</span></span><br><span class="line"><span class="built_in">read</span> NAME</span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$NAME</span> ] || [ <span class="string">"<span class="variable">$NAME</span>"</span> = <span class="string">""</span> ];<span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"you do not enter a name."</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="string">"<span class="variable">$NAME</span>"</span> = <span class="string">"root"</span> ];<span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"hello root"</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="string">"<span class="variable">$NAME</span>"</span> = <span class="string">"chinaitlab"</span> ];<span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"hello chinaitlab"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"you are not root or chinaitlab,but hi,<span class="variable">$NAME</span>"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>case语句格式: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> 值 <span class="keyword">in</span></span><br><span class="line">模式1)</span><br><span class="line">	命令1</span><br><span class="line">	;;</span><br><span class="line">模式2)</span><br><span class="line">	命令2</span><br><span class="line">	;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>
<p>case取值后面必须为单词in，每一个模式必须以右括号结束。取值可以为变量或常数，匹配发现取值符合某一模式后，其间所有命令开始执行直至;;。模式匹配符*表示任意字符,?表示任意单字符，[..]表示类或范围中任意字符。<br>例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#case select </span></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">"Enter a number from 1 to 3:"</span></span><br><span class="line"><span class="built_in">read</span> ANS</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$ANS</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"you select 1"</span></span><br><span class="line">	;;</span><br><span class="line">2)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"you select 2"</span></span><br><span class="line">	;;</span><br><span class="line">3)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"you select 3"</span></span><br><span class="line">	;;</span><br><span class="line">Y|y)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"you select <span class="variable">$ANS</span>"</span></span><br><span class="line">	;;</span><br><span class="line">*)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"basename <span class="variable">$0</span>:This is not between 1 and 3"</span> &gt;&amp;2</span><br><span class="line">	<span class="built_in">exit</span>;</span><br><span class="line">	;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>
<p>for循环格式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 变量名 <span class="keyword">in</span> 列表</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	命令1</span><br><span class="line">	命令2</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>当变量值在列表里，for循环即执行一次所有命令，使用变量名访问列表中取值。命令可为任何有效的shell命令和语句。变量名为任何单词。In列表用法是可选的，如果不用它，for循环使用命令行的位置参数。in列表可以包含替换，字符串和文件名。<br>例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#forlist1</span></span><br><span class="line"><span class="keyword">for</span> loop <span class="keyword">in</span> 1 2 3 4 5</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$loop</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>再例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#forlist2</span></span><br><span class="line"><span class="keyword">for</span> loop <span class="keyword">in</span> <span class="string">"orange red blue grey"</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$loop</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>再例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#forlist2</span></span><br><span class="line"><span class="keyword">for</span> loop <span class="keyword">in</span> `cat myfile`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$loop</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">until循环格式：</span><br><span class="line">until 条件</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  命令1</span><br><span class="line">  命令2</span><br><span class="line">  ...</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>
<p>注：条件可为任意测试条件，测试发生在循环末尾，因此循环至少执行一次。<br>例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#until_mon</span></span><br><span class="line"><span class="comment">#监控分区</span></span><br><span class="line">Part=<span class="string">"/backup"</span></span><br><span class="line"><span class="comment">#得到磁盘使用的百分比</span></span><br><span class="line">LOOK_OUT=`df|grep <span class="string">"<span class="variable">$Part</span>"</span>|awk <span class="string">'&#123;print $5&#125;'</span>|sed <span class="string">'s/%//g'</span>`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$LOOK_OUT</span></span><br><span class="line">until [<span class="string">"<span class="variable">$LOOK_OUT</span>"</span> gt <span class="string">"90"</span>]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"FileSystem /backup is nearly full"</span> |mail root</span><br><span class="line">  LOOK_OUT=`df|grep <span class="string">"<span class="variable">$Part</span>"</span>|awk <span class="string">'&#123;print $5&#125;'</span>|sed <span class="string">'s/%//g'</span>`</span><br><span class="line">  sleep 3600</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>
<p>然后# nohup ./dfuntil &amp;让这个程序在后台运行，一小时检测一次看这个分区的空间占用率是否大于90%。</p>
<p>while格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> 命令</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  命令1</span><br><span class="line">  命令2</span><br><span class="line">  ...</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>
<p>注：在while和do之间虽然通常只使用一个命令，但可以放几个命令，命令通常用作测试条件。<br>例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#whileread</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"按住&lt;ctrl&gt;+D退出输入。"</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">echo</span> -n <span class="string">"输入你最喜欢的电影："</span>;<span class="built_in">read</span> FILM</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"Yeah.<span class="variable">$&#123;FILM&#125;</span>是一部好电影！"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>
<p>再例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#whileread</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> LINE</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$LINE</span></span><br><span class="line"><span class="keyword">done</span> &lt;names.txt</span><br></pre></td></tr></table></figure></p>
<p>把names.txt这个文件的内容按每行输出到屏幕。<br>break与continue：<br>break[n]<br>-退出循环，如果是在一个嵌入循环里，可以指定n来跳出的循环个数。<br>例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#breakout</span></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> -n <span class="string">"Enter any number[1..5]:"</span></span><br><span class="line">  <span class="built_in">read</span> ANS</span><br><span class="line">  <span class="keyword">case</span> <span class="variable">$ANS</span> <span class="keyword">in</span></span><br><span class="line">  1|2|3|4|5)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"you enter a number between 1 and 5."</span></span><br><span class="line">	;;</span><br><span class="line">  *)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"wrong number,bye."</span></span><br><span class="line">	<span class="built_in">break</span></span><br><span class="line">	;;</span><br><span class="line">  <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>
<p>再例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#breakout</span></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> -n <span class="string">"Enter any number[1..5]:"</span></span><br><span class="line">  <span class="built_in">read</span> ANS</span><br><span class="line">  <span class="keyword">case</span> <span class="variable">$ANS</span> <span class="keyword">in</span></span><br><span class="line">  1|2|3|4|5)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"you enter a number between 1 and 5."</span></span><br><span class="line">	;;</span><br><span class="line">  *)</span><br><span class="line">	<span class="built_in">echo</span> -n <span class="string">"wrong number,continue(y/n)?:"</span></span><br><span class="line">	<span class="built_in">read</span> IS_CONTINUE</span><br><span class="line">	<span class="keyword">case</span> <span class="variable">$IS_CONTINUE</span> <span class="keyword">in</span></span><br><span class="line">		y|yes|Y|YES)</span><br><span class="line">			<span class="built_in">continue</span></span><br><span class="line">			;;</span><br><span class="line">		*)</span><br><span class="line">			<span class="built_in">break</span></span><br><span class="line">			;;</span><br><span class="line">	<span class="keyword">esac</span></span><br><span class="line">  <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>
<h2 id="第五讲"><a href="#第五讲" class="headerlink" title="第五讲"></a>第五讲</h2><p>正则表达式：一种用来描述文本模式的特殊语法，由普通字符(a到z)以及特殊字符(称为元字符，如/,*,?等)<br>匹配的字符串<br>文本过滤工具在某种模式下都支持正则表达式<br>基本元字符集及含义<br>字符    含义<br>^    只匹配行首<br>$    只匹配行尾</p>
<ul>
<li>匹配0个或多个此单字符<br>]    只匹配[]内字符，可以是一个单字符，也可以是字符序列。可以使用-表示[]内字符序列范围，如用[1-5]代替[12345]。<br> 只用来屏蔽一个元字符的特殊含义<br> 只匹配任意单字符<br>attern{n}    只用来匹配前面pattern出现次数。n为次数<br>attern{n,}    含义同上，但次数最少为n<br>attern{n,m}    含义同上，但pattern出现次数在n与m之间。<br>例：<br>^d<br>rwxrwxrw-    匹配<br>rw-rw-rw    不匹配<br>^…1<br>482XC56D    不匹配<br>442XW7134    不匹配<br>451ABC123    匹配<br>D11XC9871    匹配<br>trouble$–匹配以单词trouble结尾的所有字符<br>^$–匹配空行<br>^.$–匹配包含一个字符的行<br>用\屏蔽一个特殊字符，特殊字符有”,’,||,^,<em>,.,+等，\</em>.pas正则表达式中匹配以*.pas结尾的所有字符或文件。</li>
</ul>
<p>逗号将括弧内要匹配的不同字符串分开，用-表示一个字符串范围<br>[0123456789]或[0-9]：任意一个数字<br>[a-z]：任意小写字母<br>[A-Z a-z]：任意大小写字母<br>[A-Z a-z 0-9]：任意字母或数字<br>[S,s]：匹配大小写s</p>
<p>A{2}B：A出现2次：AAB<br>A{4,}B：A最少出现4次，AAAAB，AAAAAB…<br>A{2,4}B：A出现次数范围2-4次，AAB，AAAB，AAAAB<br>[0-9]{3}.[0-9]{3}.[0-9]{3}.[0-9]{3}：匹配IP地址</p>
<p>find命令形式<br>find pathname -option [-print -exec -ok]<br>-pathname查找路径，例如用.来表示当前目录，用/表示系统根目录。-print，find命令将匹配的文件输出到标准输出。-exec，find命令对匹配的文件执行该参数所给出的shell命令，相应命令的形式为’command’{} \;’，注意{}和\；之间的空格。-ok和-exec的作用相同，只不过以一种更为安全的模式来执行该参数所给出的shell命令，在执行每一个命令之前都会给出提示，让用户来确定是否执行。<br>find命令的一般形式：<br>-name按照文件名找文件<br>-perm按照文件权限来找文件<br>-user按照文件属主来找文件<br>-group按照文件所属的组来找文件<br>-mtime -n +n按照文件的更改时间来查找文件。-n表示文件更改时间距现在n天以内，+n表示文件更改时间距现在n天以前。find命令还有-atime和-ctime选项，但他们都和-mtime选项相似<br>-size n[c]查找文件长度为n块的文件，带有c时表示文件长度以字节计。<br>-nogroup查找无有效所属组的文件，即该文件所属的组在/etc/groups中不存在。<br>-nouser查找无有效属主的文件，即该文件的属主在/etc/passwd中不存在。<br>-newer file1 ! -newer file2查找更改时间比文件file1新但比文件file2旧的文件。<br>-type查找某一类的文件，比如：b块设备文件，d目录，c字符设备文件，p管道文件，l符号链接文件，f普通文件。</p>
<p>举例：<br>-name：可以使用某种文件名模式来匹配文件，记住要用引号将文件名模式引起来，例：<br>find -name “<em>.txt” -print，没有路径表示查找当前路径。find ./ -name “</em>.txt” -print。find ./ -name “[A-Z]<em>“ -print，find /etc -name “host</em>“ -print。<br>-perm：find . -perm 755 -print。<br>-user和-nouser：find <code>pwd</code> -user root -print。find <code>pwd</code> -nouser -print。<br>-group和-nogroup：find ./ -group itlab -print，find / -nogroup -print。<br>-mtime：find /var -mtime -5 -print，find /var -mtime +3 -print。<br>-newer：find <code>pwd</code> -newer “myfile” ! -newer “myfile123” -print。<br>-type：find /etc -type d -print。<br>-size：find . -size +1000000c -print查找文件大小大于1000000字节的文件，find . -size +10 -print，查找大小大于10块的文件。<br>-depth：使用find命令时，可能希望先匹配所有的文件，再在子目录中查找，find / -name “con.file” -depth -print。<br>-exec或ok：find . -type f -exec ls -l {} \;<br>find . -name “*.log” -mtime +5 -ok rm{} \;<br>-xargs:在使用find命令的-exec选项处理匹配到的文件时，find命令将所有匹配到的文件一起传递给exec，不幸的是有些系统对能够传递给exec的命令长度有限制，这样在find命令运行几分钟后就会出现溢出错误。错误信息通常是“参数列太长”或“参数列溢出”，这就是xargs命令的用处所在，特别是与find命令一起使用。exec会发起多个进程，而xargs不会多个，只有一个。例：find ./ -perm -7 -print | xargs chmod o-w，<br>find ./ -type f -print | xargs file。</p>
<p>grep介绍<br>对文本文件进行模式查找，grep有三种变形<br>-Grep：标准grep命令<br>-Egrep：扩展grep，支持基本及扩展的正则表达式<br>-Fgrep：快速grep<br>grep一般格式为：<br>-grep[选项]基本正则表达式[文件]<br>-字符串参数(基本正则表达式)最好采用双引号，一是以防被误解为shell命令，二是可以用来查找多个单词组成的字符串。<br>grep命令选项：<br>-c：只输出匹配行的计数<br>-i：不区分大小写(只适用于单字符)<br>-h：查询多文件时不显示文件名<br>-H：显示文件名<br>-l：查询多文件时只输出包含匹配字符的文件名<br>-n：显示匹配行及行号<br>-s：不显示不存在或无匹配文本的错误信息<br>-v：显示不包含匹配文本的所有行<br>例：<br>grep “jenny” <em>.txt<br>grep “sort it” </em><br>grep -c “2004” myfile<br>grep -n “2004” myfile<br>grep -i “Jul” myfile<br>grep -v “2004:22” myfile<br>grep “2004:22:5[0-9]” myfile<br>grep “^[^210]” myfile，查找行首不是2或1或0的行。<br>grep “[5-8][6-9][0-2]” myfile<br>grep “4{2}“ myfile<br>grep “4{2,}“ myfile<br>grep “4{2,4}“ myfile<br>grep “^$” myfile<br>grep “\?” myfile<br>grep “^d” myfile<br>grep “^[^d]” myfile</p>
<p>grep命令类名类等价的正则表达式<br>[[:upper:]][A-Z]<br>[[:alnum:]][0-9a-zA-Z]<br>[[:lower:]][a-z]<br>[[:space:]]    空格或tab键<br>[[:digit:]][0-9]<br>[[:alpha:]][a-zA-Z]<br>例：grep “5[[:digit:]][[:digit:]]” myfile</p>
<p>awk介绍<br>可从文件或字符串中基于指定规则浏览和抽取信息，是一种自解释的编程语言，三种方式调用awk：<br>-命令行方式：<br>    awk [-F field-spearator]’command’ input-files，field-spearator默认是空格。<br>-awk脚本<br>    所有awk命令插入一个文件，并使awk程序可执行，然后用awk命令解释器作为脚本的首行，以便通过键入脚本名称来调用它。<br>-awk命令插入一个单独文件<br>    awk -f awk-script-file input-files</p>
<p>awk脚本由各种操作和模式组成<br>模式和动作：<br>    -模式部分决定动作语句何时出发及出发事件。(BEGIN,END)<br>    -动作对数据进行处理，放在大括号{}内指明。(input)<br>分隔符，域和记录：<br>    -awk执行时，其浏览域标记为$1,$2…$n。这种方法称为域标识。$0为所有域，即这条记录。<br>    -注意执行时不要混淆符号$和shell提示符$，他们是不同的。<br>例：awk ‘{print $0}’ score.txt | tee score.out。<br>awk -F . ‘{print $0}’ score.txt |tee score.out。<br>awk ‘{print $1 “\t”$4}’ score.txt。<br>awk ‘BEGIN {print “Name Maths\n——“} {print $1”\t”$4} END {print “end-of-report”}’ score.txt。</p>
<p>awk中的特殊元字符：+和？，+表示匹配任意字符，？表示匹配单个字符。<br>匹配操作符：~(表示匹配),!~(表示不匹配)，要匹配的内容放在两个\之间。<br>cat score.txt|awk ‘$0 ~/218.79.131.96/‘。<br>awk ‘$0 !~/218.79.131.96/‘ score.txt。<br>awk ‘{if($1==”218.79.131.96”) print $0}’ score.txt。</p>
<p>sed介绍<br>sed不与初始化文件打交道，它操作的只是一个拷贝，然后所有的改动如果没有重定向到一个文件，将输出到屏幕。sed是一种重要的文本过滤工具，使用一行命令或使用管道与grep与awk相结合。非交互性文本流编辑。调用sed有三种方式：<br>-使用sed命令行格式<br>   sed [选项] sed命令 输入文件<br>-使用sed脚本文件，格式为：<br>   sed [选贤] -f sed脚本文件 输入文件<br>-sed脚本文件[选项] 输入文件<br>-不管是使用shell命令行方式或脚本文件方式，如果没有指定输入文件，sed从标准输入中接受输入，一般是键盘或重定向结果。<br>sed命令选项：<br>-n不打印<br>-c下一命令是编辑命令<br>-f如果正在调用sed脚本文件</p>
<p>sed在文件中查找文本的方式<br>-使用行号，可以是一个简单数字或是一个行号范围<br>-使用正则表达式<br>x            x为一行号<br>x,y            表示行号范围从x到y<br>/pattern/        查询包含模式的行<br>/pattern/pattern/    查询包含两个模式的行<br>pattern/,x        在给定的行号上查询包含模式的行<br>x,/pattern/        通过行号和模式查询匹配行<br>x,y!            查询不包含指定行号x和y的行<br>基本sed编辑命令：<br>p    打印匹配行<br>=    显示文件行号<br>a\    在定位行号后附加新文本信息<br>i\    在定位行号后插入新文本信息<br>d    删除定位行<br>c\    用新文本替换定位文本<br>s    使用替换模式替换相应模式<br>r    从另一个文件中读文本<br>w    写文本到一个文件<br>q    第一个模式匹配完成后退出或立即退出<br>l    显示与八进制ASCII代码等价的控制字符<br>{}    在定位行执行的命令组<br>n    从另一个文件中读文本下一行，并附加在下一行<br>g    将模式2粘贴到/pattern n/<br>y    传送字符</p>
<p>例：<br>sed ‘2p’ score.txt，单引号中的是命令，打印score.txt这个文件的第二行，这里全部打印，因为没有加-n，这样匹配到的和没匹配到的都打印。<br>sed -n ‘2p’ score.txt，-n表示不打印没匹配到的，只打印第二行。<br>sed -n ‘1,4p’ score.txt，打印1~4行。<br>sed -n ‘/los/p’ myfile.txt，打印包含los字符的所有行。<br>sed -n ‘4,/los/p’ myfile.txt，从第四行开始匹配到第一个los结束，如果los在第六行，那么从第四行到第六行都打印，如果下面还有los也不打印了。<br>sed -n ‘/^$/=’ myfile.txt，显示空行的行号。<br>sed -n -e ‘/^$/p’ -e ‘/^$/=’ myfile，打印空白行打印行号。<br>sed -n ‘/chinaitlab/a\shenzhen’ myfile.txt。<br>sed -n ‘/chinaitlab/i\shenzhen’ myfile.txt。<br>sed -n ‘/chinaitlab/c\chinaitlab shenzhen’ myfile.txt。<br>sed ‘1,2d’ myfile.txt，把第一第二行删除。<br>sed ‘s/chinaitlab/chinaitlab shenzhen/g’ myfile.txt，当有多个chinaitlab时，加g表示全部替换。<br>sed -n ‘s/chinaitlab/&amp; hello/p’ myfile.txt， 在匹配到的所有的chinaitlab的后面加 hello。<br>sed -n ‘s/chinaitlab/hello &amp;/p’ myfile.txt，在匹配到的所有的chinaitlab的前面加 hello。<br>sed ‘lr ctrl.txt’ myfile.txt。<br>sed ‘china/q’ myfile.txt。<br>sed -n ‘/china/l’ myfile.txt。</p>
<p>合并与分割<br>sort[options] files<br>-许多不同的域按不同的列顺序分类<br>-c测试文件是否已经分类<br>-m合并两个分类文件<br>-u删除所有复制行<br>-o存储sort结果的输出文件名<br>-t域分隔符：用非空格或tab键分割域<br>+n n为域号，使用此域号开始分类<br>n指定分类是域上的数字分类项<br>-r比较求逆</p>
<p>例：<br>sort -c myfile，检查这个文件是否已经排序。<br>sort -u myfile，</p>
<h2 id="第六讲shell函数"><a href="#第六讲shell函数" class="headerlink" title="第六讲shell函数"></a>第六讲shell函数</h2><p>定义函数格式：<br>函数名()<br>{<br>命令1<br>…<br>}<br>function 函数名()<br>{<br>…<br>}<br>函数可以放在同一个文件中作为一段代码，也可以放在只包含函数的单独文件中。</p>
<p>#!/bin/bash</p>
<p>#hellofun<br>function hello()<br>{<br>echo “hello,today is <code>date</code>“<br>return 0<br>}<br>echo “now going to the function hello”<br>hello<br>echo “back from the function”</p>
<p>参数传递：向函数传递参数就像在脚本中使用位置变量$1,$2…$9<br>例：</p>
<p>#!/bin/bash</p>
<p>#func<br>function hello()<br>{<br>echo “Hello,$1 today is <code>date</code>“<br>}<br>echo “now going to the function hello”<br>hello chinaitlab<br>echo “back from the function”</p>
<p>函数文件</p>
<p>#!/bin/bash</p>
<p>#func</p>
<p>#source function<br>. hellofun<br>echo “now going to the function hello”<br>hello<br>echo “back from the function”</p>
<p>#!/bin/bash</p>
<p>#hellofun<br>function hello()<br>{<br>echo “Hello, today is <code>date</code>“<br>return 0<br>}</p>
<p>检查载入函数和删除函数<br>察看载入函数set<br>删除函数unset<br>例：</p>
<p>#!/bin/bash</p>
<p>#func</p>
<p>#source function<br>. hellofun<br>set #察看加载的函数和变量信息<br>echo “now going to the function hello”<br>unset hello#删除这个函数<br>hello<br>echo “back from the function”</p>
<p>函数返回值：</p>
<p>#!/bin/bash</p>
<p>#hellofun<br>function hello()<br>{<br>echo “Hello, today is <code>date</code>“<br>return 0<br>}</p>
<p>#!/bin/bash</p>
<p>#func<br>echo “now going to the function hello”<br>hello<br>echo $?<br>echo “back from the function”</p>
<h2 id="第七讲脚本参数传递"><a href="#第七讲脚本参数传递" class="headerlink" title="第七讲脚本参数传递"></a>第七讲脚本参数传递</h2><p>shift命令,每次讲参数位置向左偏移n位。</p>
<p>#!/bin/bash</p>
<p>#opt2<br>usage()<br>{<br>echo “usage:<code>basename $0</code> filenames”<br>}<br>totalline=0<br>if[ $# -lt 2 ];then<br>    usage<br>    exit#退出系统，下面的代码不执行<br>fi<br>while [ $# -ne 0]#参数个数不等于0<br>do<br>line=<code>cat $1|wc -l</code><br>echo “$1:${line}”<br>totalline=$[$totalline+$line]<br>shift#调用shift时$#(参数个数)也跟着减1<br>done<br>echo “———–”<br>echo “total:${totalline}”</p>
<p>getopts获得多个命令行参数</p>
<p>#!/bin/bash<br>ALL=false<br>HELP=false<br>FILE=false<br>VERBOSE=false<br>while getopts ahfvc OPTION<br>do<br>    case $OPTION in<br>    a)<br>        ALL=true<br>        echo “ALL IS $ALL”<br>        ;;<br>    h)<br>        HELP=true<br>        echo “HELP is $HELP”<br>        ;;<br>    f)<br>        FILE=true<br>        echo “FILE is $FILE”<br>        ;;<br>    v)<br>        VERBOSE=true<br>        echo “VERBOSE is $VERBOSE”<br>        ;;<br>    c)<br>        echo “c value is $c”<br>        ;;<br>    \?)<br>        echo “<code>basename $0</code> -[a h f v] -[c value] file “<br>        ;;<br>    esac<br>done</p>
<hr>
<h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><h4 id="linux使用备忘"><a href="#linux使用备忘" class="headerlink" title="linux使用备忘"></a>linux使用备忘</h4><p>查看linux文件目录的大小和文件夹包含的文件数：</p>
<p>du -sh xmldb/ #查看xmldb文件大小<br>du -sm <em> | sort -n  #统计当前目录大小 并安大小 排序<br>du -sk </em> | sort -n </p>
<h4 id="压缩文件："><a href="#压缩文件：" class="headerlink" title="压缩文件："></a>压缩文件：</h4><p>tar -zcvf  a.tgz aa   #压缩aa文件为a.tgz<br>tar -zxvf a.tgz #解压</p>
<h4 id="查找文件："><a href="#查找文件：" class="headerlink" title="查找文件："></a>查找文件：</h4><p>find / -name filename #在所有目录下查找filename<br>find /opt -name file* #在/opt下查找以find开头的文件<br>find / -amin -10 # 查找在系统中最后10分钟访问的文件<br>find / -atime -2 # 查找在系统中最后48小时访问的文件<br>find / -empty # 查找在系统中为空的文件或者文件夹<br>find / -group cat # 查找在系统中属于 groupcat的文件<br>find / -mmin -5 # 查找在系统中最后5分钟里修改过的文件<br>find / -mtime -1 #查找在系统中最后24小时里修改过的文件<br>find / -nouser #查找在系统中属于作废用户的文件<br>find / -user fred #查找在系统中属于FRED这个用户的文件</p>
<hr>
<p>小红帽企业版的telnet为krb5-telnet，依附于xinetd服务，将/etc/xinetd.d/krb5-telnet<br>的disable设置为no，重启xinetd即可启用telnet服务，默认是不允许root用户登录。允许普通的telnet登陆，但也可使用kerberos5验证 </p>
<p>个人版RedHat Linux的telnet也是同样的道理，也是依附于xinetd服务，配置文件是/etc/xinetd.d/telnet。提供telnet服务，使用未加密的用户/密码组进行验证</p>
<p>用passwd修改用户密码，常常提示“BAD PASSWORD: it is based on a dictionary word”，实际上<br>linux要求的密码的验证机制是在/etc/login.defs中规定最小密码字符数。还要受到/etc/pam.d/passwd的限定，但是在root用户下怎么设置都可以，可以不受验证机制的约束，即便出来“BAD PASSWORD: it is based on a dictionary word”也可以修改成功。</p>
<p>但是普通用户修改自己的密码，如果不符合密码验证机制的话就修改不成功，会有各种报错，“BAD PASSWORD: it’s WAY too short”，这是报密码太短，不符合/etc/login.defs的设置，“BAD PASSWORD: it is based on your username”，这是密码与帐号不能同名，这是不符合/etc/pam.d/passwd的设置。“BAD PASSWORD: it is based on a dictionary word”这是因为出现了字典里的字符串，如果你英文与数字组合使用，就不会报错。</p>
<hr>
<h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><h4 id="1-ln-命令详解"><a href="#1-ln-命令详解" class="headerlink" title="1.ln 命令详解"></a>1.ln 命令详解</h4><p><code>ln -s  源文件 目标文件</code>     -s 是 symbolic的意思。<br>例：<code>ln  -s  /lib/lsb   /usr/lj</code><br>即：在usr目录下建立指向/lib/lsb目录的lj文件。</p>
<p><code>ln -s /opt/oracle /opt/app/oracle</code><br>建立链接<code>/opt/oracle</code> 链接目录 <code>/opt/app/oracle</code><br>比如在/data目录下建立一个a目录的连接b<br><code>ln -s /data/a /data/b</code><br>例如：<br><code>ln -s db_1 /opt/oracle/product/10.2.0/db_1</code><br>这条命令式在 /opt/oracle/product/10.2.0/db_1 下建立一个 db_1 的链接。<br>现在 /opt/oracle/product/10.2.0/db_1 下应该会还有个db_1</p>
<p>ln 是 Linux 中一个非常重要命令。它的功能是为某一个文件在另外一个位置建立一个同步的链接，这个命令最常用的参数是-s,具体用法是： </p>
<p>ln -s  源文件 目标文件    -s 是 symbolic的意思。<br>例： <code>ln  -s  /lib/lsb   /usr/lj</code><br>即：在 usr 目录下建立指向 /lib/lsb 目录的lj文件。</p>
<p>备份命令<br><code>tar -cvf oraclehome.tar /opt/oracle/product/10.2.0/db_1</code><br>备份一下<br>解压命令<br><code>tar -xvfz /opt/oracle/product/allbackup.tar.gz /opt/oracle/product/10.2.0</code></p>
<p>当我们需要在不同的目录，用到相同的文件时，我们不需要在每一个需要的目录下都放一个必须相同的文件，我们只要在某个固定的目录，放上该文件，然后在其它的目录下用ln命令链接（link）它就可以，不必重复的占用磁盘空间。例如：<code>ln -s /bin/less /usr/local/bin/less-s 是代号（symbolic）的意思。这里有两点要注意：第一，ln命令会保持每一处链接文件的同步性，也就是说，不论你改动了哪一处，其它的文件都会发生相同的变化；第二，ln的链接又软链接和硬链接两种，软链接就是ln -s ** **,它只会在你选定的位置上生成一个文件的镜像，不会占用磁盘空间，硬链接ln ** **,没有参数-s, 它会在你选定的位置上生成一个和源文件大小相同的文件，无论是软链接还是硬链接，文件都保持同步变化。软链接是可以跨分区的，但是硬链接只能在同一分区内。如果你用ls察看一个目录时，发现有的文件后面有一个@的符号，那就是一个用ln命令生成的文件，用ls -l命令去察看，就可以看到显示的link的路径了当我们需要在不同的目录，用到相同的文件时，我们不需要在每一个需要的目录下都放一个必须相同的文件，我们只要在某个固定的目录，放上该文件，然后在其它的目录下用ln命令链接（link）它就可以，不必重复的占用磁盘空间。例如：</code>ln -s /bin/less /usr/local/bin/less `<br>注意： </p>
<p>第一，ln命令会保持每一处链接文件的同步性，也就是说，不论你改动了哪一处，其它的文件都会发生相同的变化； </p>
<p>第二，ln的链接又软链接和硬链接两种，软链接就是ln -s <strong> </strong>,它只会在你选定的位置上生成一个文件的镜像，不会占用磁盘空间，硬链接ln <strong> </strong>,没有参数-s, 它会在你选定的位置上生成一个和源文件大小相同的文件，无论是软链接还是硬链接，文件都保持同步变化。软链接是可以跨分区的，但是硬链接只能在同一分区内。<br>第三：目录不能建立硬链接，但可以建立软链接。 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br></pre></td><td class="code"><pre><span class="line">Linux操作系统下共享文件夹设置方法介绍 </span><br><span class="line"></span><br><span class="line">首先当然是要安装samba了，呵呵： </span><br><span class="line"></span><br><span class="line">sudo apt-get install samba </span><br><span class="line"></span><br><span class="line">sudo apt-get install smbfs </span><br><span class="line"></span><br><span class="line">下面我们来共享群组可读写文件夹，假设你要共享的文件夹为： /home/ray/share </span><br><span class="line"></span><br><span class="line">首先创建这个文件夹 </span><br><span class="line"></span><br><span class="line">mkdir /home/ray/share </span><br><span class="line"></span><br><span class="line">chmod 777 /home/ray/share </span><br><span class="line"></span><br><span class="line">备份并编辑smb.conf允许网络用户访问 </span><br><span class="line"></span><br><span class="line">sudo cp /etc/samba/smb.conf /etc/samba/smb.conf_backup </span><br><span class="line"></span><br><span class="line">sudo gedit /etc/samba/smb.conf </span><br><span class="line"></span><br><span class="line">搜寻这一行文字 </span><br><span class="line"></span><br><span class="line">; security = user </span><br><span class="line"></span><br><span class="line">用下面这几行取代 </span><br><span class="line"></span><br><span class="line">security = user </span><br><span class="line"></span><br><span class="line">username map = /etc/samba/smbusers </span><br><span class="line"></span><br><span class="line">将下列几行新增到文件的最后面，假设允许访问的用户为：newsfan。而文件夹的共享名为 Share </span><br><span class="line"></span><br><span class="line">[Share] </span><br><span class="line"></span><br><span class="line">comment = Shared Folder with username and password </span><br><span class="line"></span><br><span class="line">path = /home/ray/share </span><br><span class="line"></span><br><span class="line">public = yes </span><br><span class="line"></span><br><span class="line">writable = yes </span><br><span class="line"></span><br><span class="line">valid users = newsfan </span><br><span class="line"></span><br><span class="line">create mask = 0700 </span><br><span class="line"></span><br><span class="line">directory mask = 0700 </span><br><span class="line"></span><br><span class="line">force user = nobody </span><br><span class="line"></span><br><span class="line">force group = nogroup </span><br><span class="line"></span><br><span class="line">available = yes </span><br><span class="line"></span><br><span class="line">browseable = yes </span><br><span class="line"></span><br><span class="line">然后顺便把这里改一下，找到［global］把 workgroup = MSHOME 改成 </span><br><span class="line"></span><br><span class="line">workgroup = WORKGROUP </span><br><span class="line"></span><br><span class="line">display charset = UTF-8 </span><br><span class="line"></span><br><span class="line">unix charset = UTF-8 </span><br><span class="line"></span><br><span class="line">dos charset = cp936 </span><br><span class="line"></span><br><span class="line">后面的三行是为了防止出现中文目录乱码的情况。其中根据你的<span class="built_in">local</span>，UTF-8 有可能需要改成 cp936。自己看着办吧。 </span><br><span class="line"></span><br><span class="line">现在要添加newsfan这个网络访问帐户。如果系统中当前没有这个帐户，那么 </span><br><span class="line"></span><br><span class="line">sudo useradd newsfan </span><br><span class="line"></span><br><span class="line">要注意，上面只是增加了newsfan这个用户，却没有给用户赋予本机登录密码。所以这个用户将只能从远程访问，不能从本机登录。而且samba的登录密码可以和本机登录密码不一样。 </span><br><span class="line"></span><br><span class="line">现在要新增网络使用者的帐号： </span><br><span class="line"></span><br><span class="line">sudo smbpasswd -a newsfan </span><br><span class="line"></span><br><span class="line">sudo gedit /etc/samba/smbusers </span><br><span class="line"></span><br><span class="line">在新建立的文件内加入下面这一行并保存 </span><br><span class="line"></span><br><span class="line">newsfan = <span class="string">"network username"</span> </span><br><span class="line"></span><br><span class="line">如果将来需要更改newsfan的网络访问密码，也用这个命令更改 </span><br><span class="line"></span><br><span class="line">sudo smbpasswd -a newsfan </span><br><span class="line"></span><br><span class="line">删除网络使用者的帐号的命令把上面的 -a 改成 -x </span><br><span class="line"></span><br><span class="line">sudo testparm </span><br><span class="line"></span><br><span class="line">sudo /etc/init.d/samba restart </span><br><span class="line"></span><br><span class="line">如果还是不行查看Iptables（防火墙是否开启），如果开启可以先将服务停止。</span><br><span class="line"></span><br><span class="line">最后退出重新登录或者重新启动一下机器。 </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">利用Samba配置文件共享服务</span><br><span class="line"></span><br><span class="line">配置文件 /etc/samba/</span><br><span class="line"></span><br><span class="line">//设置samba密码文件</span><br><span class="line"></span><br><span class="line"><span class="comment"># cat /etc/passwd|mksmbpasswd.sh &gt; /etc/samba/smbpasswd</span></span><br><span class="line"></span><br><span class="line">//为安全起见，设置文件和目录的权限</span><br><span class="line"></span><br><span class="line"><span class="comment"># chown root.root /etc/samba/smbpasswd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># chmod 500 /etc/samba</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># chmod 600 /etc/samba/smbpasswd</span></span><br><span class="line"></span><br><span class="line">//为用户设置口令</span><br><span class="line"></span><br><span class="line"><span class="comment">#smbpasswd root</span></span><br><span class="line"></span><br><span class="line">//检查配置文件的正确性</span><br><span class="line"></span><br><span class="line"><span class="comment"># testparm</span></span><br><span class="line"></span><br><span class="line">//检查服务器所共享的资源</span><br><span class="line"></span><br><span class="line"><span class="comment"># smbclient –L localhost</span></span><br><span class="line"></span><br><span class="line">//列出资源使用情况</span><br><span class="line"></span><br><span class="line"><span class="comment"># smbstatus [-b]</span></span><br><span class="line"></span><br><span class="line">//配置文件</span><br><span class="line"></span><br><span class="line">节：</span><br><span class="line"></span><br><span class="line">l         [Global] 定义全局参数和缺省值</span><br><span class="line"></span><br><span class="line">l         [Homes] 定义用户的Home目录共享</span><br><span class="line"></span><br><span class="line">l         [Printers] 定义打印机共享</span><br><span class="line"></span><br><span class="line">l         [Userdefined_ShareName] 用户自定义共享（可有多个）</span><br><span class="line"></span><br><span class="line">变量：</span><br><span class="line"></span><br><span class="line">l         %S 当前服务名</span><br><span class="line"></span><br><span class="line">l         %P 当前服务的根路径</span><br><span class="line"></span><br><span class="line">l         %u 当前服务的用户名</span><br><span class="line"></span><br><span class="line">l         %g 给定%u的所在工作组名</span><br><span class="line"></span><br><span class="line">l         %H 给定%u的宿主目录</span><br><span class="line"></span><br><span class="line">l         %v Samba版本号</span><br><span class="line"></span><br><span class="line">l         %h 运行服务的主机名</span><br><span class="line"></span><br><span class="line">l         %m 客户机的NETBIOS名</span><br><span class="line"></span><br><span class="line">l         %L 服务器的NetBIOS名</span><br><span class="line"></span><br><span class="line">l         %L 当前的日期和时间</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">//使用符号链接组织本地共享资源</span><br><span class="line"></span><br><span class="line"><span class="comment"># vi /etc/samba/smb.conf</span></span><br><span class="line"></span><br><span class="line">[Resource]</span><br><span class="line"></span><br><span class="line">    comment = Local Resource</span><br><span class="line"></span><br><span class="line">    path = /var/samba/resource</span><br><span class="line"></span><br><span class="line">    public = yes</span><br><span class="line"></span><br><span class="line">writeable = yes</span><br><span class="line"></span><br><span class="line">// -p  parent(no error <span class="keyword">if</span> existing, make parent directories as needed)</span><br><span class="line"></span><br><span class="line"><span class="comment"># mkdir –p /var/samba/resource</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#cd /var/samba/resource</span></span><br><span class="line"></span><br><span class="line">//-s, --symbolic</span><br><span class="line"></span><br><span class="line"><span class="comment"># ln –s /usr/share/doc doc</span></span><br><span class="line"></span><br><span class="line">//为所有用户配置只读共享和读写共享</span><br><span class="line"></span><br><span class="line"><span class="comment"># vi /etc/samba/smb.conf</span></span><br><span class="line"></span><br><span class="line">[tmp]</span><br><span class="line"></span><br><span class="line">    comment = Temporary file space</span><br><span class="line"></span><br><span class="line">    path = /tem</span><br><span class="line"></span><br><span class="line">    <span class="built_in">read</span> only = no</span><br><span class="line"></span><br><span class="line">    public = yes</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">[cdrom]</span><br><span class="line"></span><br><span class="line">    comment = CDROM</span><br><span class="line"></span><br><span class="line">    path = /mnt/cdrom</span><br><span class="line"></span><br><span class="line">    <span class="built_in">read</span> only = yes</span><br><span class="line"></span><br><span class="line">public = yes</span><br><span class="line"></span><br><span class="line">//为指定用户或组配置共享</span><br><span class="line"></span><br><span class="line"><span class="comment"># useradd samba</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># passwd samba</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mkdir /var/samba/samba</span></span><br><span class="line"></span><br><span class="line">//更改目录属主</span><br><span class="line"></span><br><span class="line"><span class="comment"># chown samba.samba /var/samba/samba</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># vi smb.conf</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">[sambadir]</span><br><span class="line"></span><br><span class="line">    comment = Samba<span class="string">'s service</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    path = /var/samba/samba</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    valid users = samba</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    public = no</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">writable = yes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//保存修改</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//Linux环境下访问Samba共享</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># cat /etc/samba/lmhosts</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># smbclient –L IP –U 用户名</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># smbmount //win/tools /mnt/smb/win</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">linux smb.conf详解</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">17行workgroup</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">语法 workgtoup = &lt;工作组群&gt;;</span></span><br><span class="line"><span class="string">预设 workgroup = MYGROUP</span></span><br><span class="line"><span class="string">说明 设定 Samba Server 的工作组</span></span><br><span class="line"><span class="string">例 workgroup = workgroup 和WIN2000S设为一个组，可在网上邻居可中看到共享</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">21行server string</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">语法 server string = &lt;说明&gt;;</span></span><br><span class="line"><span class="string">预设 sarver string = Samba Server</span></span><br><span class="line"><span class="string">说明 设定 Samba Server 的注释</span></span><br><span class="line"><span class="string">其他 支持变量 t%-访问时间 I%-客户端IP m%-客户端主机名 M%-客户端域名 S%-客户端用户名</span></span><br><span class="line"><span class="string">例 server string = this is a Samba Server 设定出现在Windows网上邻居的 Samba Server 注释为 this is a Samba Server</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">28行hosts allow</span></span><br><span class="line"><span class="string">语法 hosts aoolw = &lt;IP地址&gt;; …</span></span><br><span class="line"><span class="string">预设 ; host allow = 192.168.1. 192.168.2. 127.</span></span><br><span class="line"><span class="string">说明 限制允许连接到 Samba Server 的机器，多个参数以空格隔开。表示方法可以为</span></span><br><span class="line"><span class="string">完整的IP地址，如 192.168.0.1</span></span><br><span class="line"><span class="string">网段，如 192.168.0.</span></span><br><span class="line"><span class="string">例 hosts allow = 192.168.1. 192.168.0.1 表示允许192.168.1 网段的机器 网址为192.168.0.1 的机器 连接到自己的samba server</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">32行printcap name</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">语法 printcap name = &lt;打印机配置文件&gt;;</span></span><br><span class="line"><span class="string">预设 printcap name = /etc/printcap</span></span><br><span class="line"><span class="string">说明 设定 samba srever 打印机的配置文件</span></span><br><span class="line"><span class="string">例 printcap name = /etc/printcap 设定 samba srever 参考 /etc/printcap 档的打印机设定</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">33行load printers</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">语法 load printers = &lt;yes/no&gt;;</span></span><br><span class="line"><span class="string">预设 load printers = yes</span></span><br><span class="line"><span class="string">说明 是否在开启 samba server 时即共享打印机</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">38行printing</span></span><br><span class="line"><span class="string">语法 printing = &lt;打印机类型&gt;;</span></span><br><span class="line"><span class="string">预设 printing = lprng</span></span><br><span class="line"><span class="string">说明 设定 samba server 打印机所使用的类型,37行为目前所支持的类型</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">42行guest account</span></span><br><span class="line"><span class="string">语法 guert account = &lt;帐户名称&gt;;</span></span><br><span class="line"><span class="string">预设 guert account = pcguest</span></span><br><span class="line"><span class="string">说明 设定访问 samba server 的来宾帐户(即访问时不用输入用户名和密码的帐户),若设为pcguest的话则为默认为”nobody”用户</span></span><br><span class="line"><span class="string">例 guert account = andy 设定设定访问 samba server 的来宾帐户以andy用户登陆,则此登陆帐户享有andy用户的所有权限</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">46行log file</span></span><br><span class="line"><span class="string">语法 log file = &lt;日志文件&gt;;</span></span><br><span class="line"><span class="string">预设 log file = /var/log/samba/%m.log</span></span><br><span class="line"><span class="string">说明 设定 samba server 日志文件的储存位置和文件名(%m代表客户端主机名)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">49行max log size</span></span><br><span class="line"><span class="string">语法 max log size = &lt;??KB&gt;;</span></span><br><span class="line"><span class="string">预设 max log size = 0</span></span><br><span class="line"><span class="string">说明 设定日子文件的最大容量,单位KB 这里的预设值0代表不做限制</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">53行security</span></span><br><span class="line"><span class="string">语法 security = &lt;等级&gt;;</span></span><br><span class="line"><span class="string">预设 security = user</span></span><br><span class="line"><span class="string">说明 设定访问 samba server 的安全级别 共有四种</span></span><br><span class="line"><span class="string">share—不需要提供用户名和密码</span></span><br><span class="line"><span class="string">user—-需要提供用户名和密码,而且身份验证由 samba server 负责</span></span><br><span class="line"><span class="string">server–需要提供用户名和密码,可指定其他机器(winNT/2000/XP)或另一台 samba server作身份验证</span></span><br><span class="line"><span class="string">domain–需要提供用户名和密码,指定winNT/2000/XP域服务器作身份验证</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">60行password server</span></span><br><span class="line"><span class="string">语法 password server = &lt;IP地址/主机名&gt;;</span></span><br><span class="line"><span class="string">预设 password server = &lt;NT-Server-Name&gt;;</span></span><br><span class="line"><span class="string">说明 指定某台服务器(包括windows 和 linux)的密码,作为用户登入时验证的密码</span></span><br><span class="line"><span class="string">其他 此项需配合 security = server时,才可设定本参数</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">64行password level</span></span><br><span class="line"><span class="string">65行username level</span></span><br><span class="line"><span class="string">语法 password level = &lt;位数&gt;;</span></span><br><span class="line"><span class="string">username level = &lt;位数&gt;;</span></span><br><span class="line"><span class="string">预设 password level = 8</span></span><br><span class="line"><span class="string">username level = 8</span></span><br><span class="line"><span class="string">说明 设定用户名和密码的位数,预设为8位字符</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">70行encrypt passwords</span></span><br><span class="line"><span class="string">语法 encrypt passwords = &lt;yes/no&gt;;</span></span><br><span class="line"><span class="string">预设 encrypt passwords = yse</span></span><br><span class="line"><span class="string">说明 设定是否对samba的密码加密</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">71行smb passwd file</span></span><br><span class="line"><span class="string">语法 smb passwd file = &lt;密码文件&gt;;</span></span><br><span class="line"><span class="string">预设 smb passwd file = /etc/samba/smbpasswd</span></span><br><span class="line"><span class="string">说明 设定samba的密码文件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">130行local master</span></span><br><span class="line"><span class="string">语法 local master = &lt;yes/no&gt;;</span></span><br><span class="line"><span class="string">预设 local master = no</span></span><br><span class="line"><span class="string">说明 设定 samba server 是否要担当LMB角色(LMB负责收集本地网络的Browse List资源),通常无特殊原因设为no</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">134行os level = 33</span></span><br><span class="line"><span class="string">语法 os level = &lt;数字&gt;;</span></span><br><span class="line"><span class="string">预设 os level = 33</span></span><br><span class="line"><span class="string">说明 设定 samba server的os level. os level从 0 到 255 . winNT的os level为33, win95/98的os level 是 1 .</span></span><br><span class="line"><span class="string">若要拿samba server 当LMB或DMB则它的os level至少要大于NT的33以上</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">139行domain master</span></span><br><span class="line"><span class="string">语法 domain master = &lt;yes/no&gt;;</span></span><br><span class="line"><span class="string">预设 domain master = yes</span></span><br><span class="line"><span class="string">说明 设定 samba server 是否要担当DMB角色(DMB会负责收集其他子网的Browse List资源),通常无特殊原因设为no</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">143行preferred master</span></span><br><span class="line"><span class="string">语法 preferred master = &lt;yes/no&gt;;</span></span><br><span class="line"><span class="string">预设 preferred master = yes</span></span><br><span class="line"><span class="string">说明 设定 samba server 是否要担当PDC角色(PDC会负责追踪网络帐户进行的一切变更),通常无特殊原因设为no.</span></span><br><span class="line"><span class="string">(同一网段内不可有两个PDC,他们会每5分钟抢主控权一次)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">163行wins support</span></span><br><span class="line"><span class="string">语法 wins support = &lt;yes/no&gt;;</span></span><br><span class="line"><span class="string">预设 wins support = yes</span></span><br><span class="line"><span class="string">说明 设定samba server 是否想网络提供WINS服务,通常无特殊原因设为no.</span></span><br><span class="line"><span class="string">除非所处网络上没有主机提供WINS服务且需要此台samba server提供WINS服务是才设yes</span></span><br><span class="line"><span class="string">其他 wins support 和 wins server 只能选择一个</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">167行wins server</span></span><br><span class="line"><span class="string">语法 wins server = &lt;IP地址&gt;;</span></span><br><span class="line"><span class="string">预设 wins server = w.x.y.z</span></span><br><span class="line"><span class="string">说明 设定samba server 是否要使用别台主机提供的WINS服务.通常无特殊原因设为no.除非所处网络上有一台主机提供WINS服务才要设yes</span></span><br><span class="line"><span class="string">其他 wins support 和 wins server</span></span><br><span class="line"><span class="string">例 wins server = 192.168.0.1 表示samba server要使用192.168.0.1提供的WINS服务</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#============================== Share Definitions =============================</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[homes]</span></span><br><span class="line"><span class="string">comment = Home Directories</span></span><br><span class="line"><span class="string">browseable = no</span></span><br><span class="line"><span class="string">writable = yes</span></span><br><span class="line"><span class="string">valid users = %S</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">使用者本身的”家”目录，当使用者以samba使用者身份登入samba server 后，</span></span><br><span class="line"><span class="string">samba server 底下会看到自己的家目录，目录名称是使用者自己的帐号</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[分享的资源名称]</span></span><br><span class="line"><span class="string">&lt;指令1&gt;; = (参数)</span></span><br><span class="line"><span class="string">&lt;指令2&gt;; = (参数)</span></span><br><span class="line"><span class="string">……………………..</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">要提供分享资源时，须先把欲分享的资源以 [ ] 符号括住，底下通常会带指令和参数来表示此资源的设定和存取权限等,详情如下</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">comment———注释说明</span></span><br><span class="line"><span class="string">path————分享资源的完整路径名称，除了路径要正确外，目录的权限也要设对</span></span><br><span class="line"><span class="string">browseable——是yes/否no在浏览资源中显示共享目录，若为否则必须指定共享路径才能存取</span></span><br><span class="line"><span class="string">printable——-是yes/否no允许打印</span></span><br><span class="line"><span class="string">hide dot ftles–是yes/否no隐藏隐藏文件</span></span><br><span class="line"><span class="string">public———-是yes/否no公开共享，若为否则进行身份验证(只有当security = share 时此项才起作用)</span></span><br><span class="line"><span class="string">guest ok——–是yes/否no公开共享，若为否则进行身份验证(只有当security = share 时此项才起作用)</span></span><br><span class="line"><span class="string">read only——-是yes/否no以只读方式共享当与writable发生冲突时也writable为准</span></span><br><span class="line"><span class="string">writable——–是yes/否no不以只读方式共享当与read only发生冲突时，无视read only</span></span><br><span class="line"><span class="string">vaild users—–设定只有此名单内的用户才能访问共享资源(拒绝优先)(用户名/@组名)</span></span><br><span class="line"><span class="string">invalid users—设定只有此名单内的用户不能访问共享资源(拒绝优先)(用户名/@组名)</span></span><br><span class="line"><span class="string">read list——-设定此名单内的成员为只读(用户名/@组名)</span></span><br><span class="line"><span class="string">write list——若设定为只读时，则只有此设定的名单内的成员才可作写入动作(用户名/@组名)</span></span><br><span class="line"><span class="string">create mask—–建立文件时所给的权限</span></span><br><span class="line"><span class="string">directory mask–建立目录时所给的权限</span></span><br><span class="line"><span class="string">force group—–指定存取资源时须以此设定的群组使用者进入才能存取(用户名/@组名)</span></span><br><span class="line"><span class="string">force user——指定存取资源时须以此设定的使用者进入才能存取(用户名/@组名)</span></span><br><span class="line"><span class="string">allow hosts—–设定只有此网段/IP的用户才能访问共享资源</span></span><br><span class="line"><span class="string">allwo hosts = 网段 except IP</span></span><br><span class="line"><span class="string">deny hosts——设定只有此网段/IP的用户不能访问共享资源</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">allow hosts=本网段指定IP指定IP</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">deny hosts=指定IP本网段指定IP</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Samba的主配置文件。但所包含的内容并不是很全，详见man smb.conf</span></span><br><span class="line"><span class="string">所有以;或#开头的行为注释行，将被忽略掉。在这个例子中我们使用；表示可以由你来修改或设置的部分，而#则表示真正意义上的注释。</span></span><br><span class="line"><span class="string">注意：不论你何时何地修改了这个文件，你都应运行一下命令“testparm“来测试你是否犯了一些基本语法的错误。</span></span><br><span class="line"><span class="string">1、全局设置</span></span><br><span class="line"><span class="string">[global]</span></span><br><span class="line"><span class="string"># workgroup = NT-Domain-Name or Workgroup-Name</span></span><br><span class="line"><span class="string">workgroup = MYGROUP</span></span><br><span class="line"><span class="string">下面的这句话是后加的，加入的意义为：使WIN用户可以看到主机的名字，但我将此行注释掉后，没看到什么影响。</span></span><br><span class="line"><span class="string">netbios name = express</span></span><br><span class="line"><span class="string">下面设置的是服务器的字符串，相当于NT中的计算机说明部分</span></span><br><span class="line"><span class="string">server string = Samba Server</span></span><br><span class="line"><span class="string">下面的选项对于安全性很重要。他允许你对是否可以进行本地网络连接的机器进行了限制。</span></span><br><span class="line"><span class="string">hosts allow = 192.168.1.50 192.168.1.43 192.168.1.44 192.168.1.45 192.168.1.46 192.168.1.47 192.168.1.48 192.168.1.49</span></span><br><span class="line"><span class="string">如果想要自动共享打印机而不是个别地进行单独设置，使用下面的选项：</span></span><br><span class="line"><span class="string">printcap name = /etc/printcap</span></span><br><span class="line"><span class="string">load printers = yes</span></span><br><span class="line"><span class="string">除非你是非标准的，否则下面的选项对于你说清楚打印系统的类型并不是很必要。当前支持的打印系统主要有以下几类：</span></span><br><span class="line"><span class="string"># bsd, sysv, plp, lprng, aix, hpux, qnx, cups</span></span><br><span class="line"><span class="string">printing = cups</span></span><br><span class="line"><span class="string">如果想要一个guest账号的话就不用注释下面的行。你必须把这个加入到/etc/passwd中，否则用户“nobody“会被使用。</span></span><br><span class="line"><span class="string">; guest account = pcguest</span></span><br><span class="line"><span class="string">下面的选项告诉samba对不同的机器连接使用不同的日志文件。小心如果你允许访问的机器太多的话，文件可能极多哟！！！：）</span></span><br><span class="line"><span class="string">log file = /var/log/samba/%m.log</span></span><br><span class="line"><span class="string">设置log文件的大小（KB）（# Put a capping on the size of the log files (in Kb).）</span></span><br><span class="line"><span class="string">max log size = 0</span></span><br><span class="line"><span class="string">安全格式。大多数用户使用用户级安全。详见security_level.txt。</span></span><br><span class="line"><span class="string">security = share</span></span><br><span class="line"><span class="string">使用密码服务选项，仅用于security = server模式</span></span><br><span class="line"><span class="string">参数列表可以包括：</span></span><br><span class="line"><span class="string"># password server = My_PDC_Name [My_BDC_Name] [My_Next_BDC_Name]</span></span><br><span class="line"><span class="string"># 或自动查找域控制器</span></span><br><span class="line"><span class="string"># password server = *</span></span><br><span class="line"><span class="string">; password server = </span></span><br><span class="line"><span class="string">对于所有的上面和下面的组成部分的_n_characters密码所允许的匹配级别</span></span><br><span class="line"><span class="string">; password level = 8</span></span><br><span class="line"><span class="string">; username level = 8</span></span><br><span class="line"><span class="string">你可能想使用密码编码。见在samba文档中的ENCRYPTION.txt, Win95.txt和WinNT.txt。</span></span><br><span class="line"><span class="string">除非你已经仔细的读过了那些文档，否则不要激活下面的选项：</span></span><br><span class="line"><span class="string">encrypt passwords = yes</span></span><br><span class="line"><span class="string">smb passwd file = /etc/samba/smbpasswd</span></span><br><span class="line"><span class="string">当samba被建成为支持SSL的模式时，下面需要从大量的假的错误中保持smbclient。（原文如下：</span></span><br><span class="line"><span class="string"># The following is needed to keep smbclient from spouting spurious errors</span></span><br><span class="line"><span class="string"># when Samba is built with support for SSL.</span></span><br><span class="line"><span class="string">; ssl CA certFile = /usr/share/ssl/certs/ca-bundle.crt</span></span><br><span class="line"><span class="string">下面的选项需要允许从windows对linux系统的密码进行修改。</span></span><br><span class="line"><span class="string"># 注意：上面带有’encrypt passwords’ 和’smb passwd file’选项使用这些。</span></span><br><span class="line"><span class="string"># 另： 如果仅是允许工作站改变加密的SMB密码那么你不需要这些。它们允许Unix密码与SMB密码保持同步。</span></span><br><span class="line"><span class="string">unix password sync = Yes</span></span><br><span class="line"><span class="string">passwd program = /usr/bin/passwd %u</span></span><br><span class="line"><span class="string">passwd chat = *New*password* %n\n *Retype*new*password* %n\n *passwd:*all*authentication*tokens*updated*successfully*</span></span><br><span class="line"><span class="string">你可以使用PAM的密码改变控制标记。如果激活的活，当一个SMB客户端请求代替了在密码程序列表时，PAM将用于密码改变。对于大多数的设置，不改变密码字符参数而激活这个也是可能的。</span></span><br><span class="line"><span class="string">pam password change = yes</span></span><br><span class="line"><span class="string">Unix用户可能映射不同的SMB用户名。</span></span><br><span class="line"><span class="string">username map = /etc/samba/smbusers</span></span><br><span class="line"><span class="string">在每一台机器的基础上，使用下面的行可以使你定制你的配置。%m以连接机器的netbios名代替。</span></span><br><span class="line"><span class="string">; include = /etc/samba/smb.conf.%m</span></span><br><span class="line"><span class="string">这个参数控制samba是否服从于PAM账号和对话管理指示。默认情况下是使用PAM仅清除文本证明且忽略任何的账号或对话管理。注意：当加密密码=yes时，samba总是忽略PAM的证明。</span></span><br><span class="line"><span class="string">obey pam restrictions = yes</span></span><br><span class="line"><span class="string">很多人都会发现这个选项优化了性能。详见speed.txt和帮助手册页。</span></span><br><span class="line"><span class="string">socket options = TCP_NODELAY SO_RCVBUF=8192 SO_SNDBUF=8192</span></span><br><span class="line"><span class="string">配置samba使用多重接口。</span></span><br><span class="line"><span class="string">如果你有多个网络接口的话，必须把他们在下面列出来。详见man。</span></span><br><span class="line"><span class="string">; interfaces = 192.168.12.2/24 192.168.13.2/24</span></span><br><span class="line"><span class="string">配置请求播出同步到远程浏览器，或从一个主机同步浏览器列表或从/到整个子网（如下）。</span></span><br><span class="line"><span class="string">; remote browse sync = 192.168.3.25 192.168.5.255</span></span><br><span class="line"><span class="string">使主机将自己广播到本地的子网。</span></span><br><span class="line"><span class="string">; remote announce = 192.168.1.255 192.168.2.44</span></span><br><span class="line"><span class="string">浏览器控件选项：</span></span><br><span class="line"><span class="string">如果你不想让你的samba在你的网络中变成一个主浏览器，那么设置local master为no，否则将采用正常的规则。</span></span><br><span class="line"><span class="string">; local master = no</span></span><br><span class="line"><span class="string">os level决定在主浏览器的中被提取的优先级。默认值是很合理的。</span></span><br><span class="line"><span class="string">; os level = 33</span></span><br><span class="line"><span class="string">域master指定samba是域主浏览器。这允许samba在子网之间比较浏览列表。如果你已经有了一个Win NT的主域控制器的话，就不要设置这个选项。</span></span><br><span class="line"><span class="string">; domain master = yes</span></span><br><span class="line"><span class="string">首选master使samba在启动时拒绝一个本地浏览器的选出，且给他一些小的较高的机会让其来选出。</span></span><br><span class="line"><span class="string">; preferred master = yes</span></span><br><span class="line"><span class="string">如果你要samba成为Win95工作站的域登录服务器的话则激活它。</span></span><br><span class="line"><span class="string">; domain logons = yes</span></span><br><span class="line"><span class="string">如果你激活了domain logons，那么你可以让每一台机器或每一个用户登录角本运行一个指定的登录批处理文件。原文如下：if you enable domain logons then you may want a per-machine or per user logon script run a specific logon batch file per workstation (machine)</span></span><br><span class="line"><span class="string">; logon script = %m.bat</span></span><br><span class="line"><span class="string">每一个用户名都运行一个指定的登录批处理文件</span></span><br><span class="line"><span class="string">; logon script = %U.bat</span></span><br><span class="line"><span class="string"># 存储动态的profile（仅针对95与NT）</span></span><br><span class="line"><span class="string"># %L 代表netbios name, %U 是一个用户名</span></span><br><span class="line"><span class="string"># 不能注释掉下面的[Profiles]共享。</span></span><br><span class="line"><span class="string">; logon path = \%L\Profiles\%U</span></span><br><span class="line"><span class="string">支持WINS部分：告诉samba组件的NMBD去激活WINS服务。</span></span><br><span class="line"><span class="string">; wins support = yes</span></span><br><span class="line"><span class="string">WINS服务器-告诉samba组件的NMBD成为一个WINS客户端。</span></span><br><span class="line"><span class="string">注意：samba即可以是一个WINS服务器，也可以是一个客户端，或都不是。</span></span><br><span class="line"><span class="string">; wins server = w.x.y.z</span></span><br><span class="line"><span class="string">WINS 代理-原文如下，没法翻译（Tells Samba to answer name resolution queries on behalf of a non WINS capable client,），执行这件事必须要求在网络中至少有一个Wins服务器。默认情况下是NO。</span></span><br><span class="line"><span class="string">; wins proxy = yes</span></span><br><span class="line"><span class="string"># DNS Proxy – 告诉samba是否经过DNS的nslookup试着去解析NETBIOS名。1.9.17的内置默认值是yes，目前已经改为1.9.18的no。</span></span><br><span class="line"><span class="string">dns proxy = no</span></span><br><span class="line"><span class="string">实例保存可以很简洁-系统默认值是_no_</span></span><br><span class="line"><span class="string">注意：可以在每一个共享基础上设置</span></span><br><span class="line"><span class="string">; preserve case = no</span></span><br><span class="line"><span class="string">; short preserve case = no</span></span><br><span class="line"><span class="string">默认实例是对于所有的DOS文件都大写</span></span><br><span class="line"><span class="string">; default case = lower</span></span><br><span class="line"><span class="string">对于此选项要很小心-它可能带来一些想不到的事情。</span></span><br><span class="line"><span class="string">; case sensitive = no</span></span><br><span class="line"><span class="string">[homes]</span></span><br><span class="line"><span class="string">comment = Home Directories</span></span><br><span class="line"><span class="string">browseable = no</span></span><br><span class="line"><span class="string">writable = yes</span></span><br><span class="line"><span class="string">valid users = %S</span></span><br><span class="line"><span class="string">create mode = 0664</span></span><br><span class="line"><span class="string">directory mode = 0775</span></span><br><span class="line"><span class="string">如果不想要samba不承认已经映射为guest的用户，可用如下设置</span></span><br><span class="line"><span class="string">; map to guest = bad user</span></span><br><span class="line"><span class="string">如果想创建netlogon目录给域登录，不要注释下面的内容。</span></span><br><span class="line"><span class="string">; [netlogon]</span></span><br><span class="line"><span class="string">; comment = Network Logon Service</span></span><br><span class="line"><span class="string">; path = /usr/local/samba/lib/netlogon</span></span><br><span class="line"><span class="string">; guest ok = yes</span></span><br><span class="line"><span class="string">; writable = no</span></span><br><span class="line"><span class="string">; share modes = no</span></span><br><span class="line"><span class="string">想提供一个指定的不固定的共享profile那么就不要注释下面的内容，默认使用用户主目录。</span></span><br><span class="line"><span class="string">;[Profiles]</span></span><br><span class="line"><span class="string">; path = /usr/local/samba/profiles</span></span><br><span class="line"><span class="string">; browseable = no</span></span><br><span class="line"><span class="string">; guest ok = yes</span></span><br><span class="line"><span class="string">注意：如果你有一个BSD风格的打印系统，则没有必须单独的特别指定每一个打印机。</span></span><br><span class="line"><span class="string">[printers]</span></span><br><span class="line"><span class="string">comment = All Printers</span></span><br><span class="line"><span class="string">path = /var/spool/samba</span></span><br><span class="line"><span class="string">browseable = no</span></span><br><span class="line"><span class="string">设置public=yes表示允许’guest account’打印</span></span><br><span class="line"><span class="string">guest ok = no</span></span><br><span class="line"><span class="string">writable = no</span></span><br><span class="line"><span class="string">printable = yes</span></span><br><span class="line"><span class="string">下面的内容对人们共享文件是有用的。</span></span><br><span class="line"><span class="string">;[tmp]</span></span><br><span class="line"><span class="string">; comment = Temporary file space</span></span><br><span class="line"><span class="string">; path = /tmp</span></span><br><span class="line"><span class="string">; read only = no</span></span><br><span class="line"><span class="string">; public = yes</span></span><br><span class="line"><span class="string">公用的可访问的目录，除了在staff组中的成员外，对其它人为只读</span></span><br><span class="line"><span class="string">;[public]</span></span><br><span class="line"><span class="string">; comment = Public Stuff</span></span><br><span class="line"><span class="string">; path = /home/nw</span></span><br><span class="line"><span class="string">; public = yes</span></span><br><span class="line"><span class="string">; writable = yes</span></span><br><span class="line"><span class="string">; printable = no</span></span><br><span class="line"><span class="string">; write list = @staff</span></span><br><span class="line"><span class="string">私有打印机，仅仅fred本人可用。打印池中的数据将被放到fred的主目录中。注意：fred用户无论在什么地方都必须对打印池有写访问的权限。</span></span><br><span class="line"><span class="string">;[yingou]</span></span><br><span class="line"><span class="string">; comment = qlj’s Printer</span></span><br><span class="line"><span class="string">; valid users = yingouqlj</span></span><br><span class="line"><span class="string">; path = /home/yingouqlj</span></span><br><span class="line"><span class="string">; public = no</span></span><br><span class="line"><span class="string">; writable = no</span></span><br><span class="line"><span class="string">; printable = yes</span></span><br><span class="line"><span class="string">私有目录，仅能对fred开放。注意fred对这个目录需要写访问的权限。</span></span><br><span class="line"><span class="string">;[fredsdir]</span></span><br><span class="line"><span class="string">; comment = qlj’s Service</span></span><br><span class="line"><span class="string">; path = /usr/somewhere/private</span></span><br><span class="line"><span class="string">; valid users = yingouqlj</span></span><br><span class="line"><span class="string">; public = no</span></span><br><span class="line"><span class="string">; writable = yes</span></span><br><span class="line"><span class="string">; printable = no</span></span><br><span class="line"><span class="string">允许你制作配置文件去引入的连接到这里的每一台机器都有不同的目录的服务。</span></span><br><span class="line"><span class="string">使用%U选去配置用户名，%m代替连接到的机器名。</span></span><br><span class="line"><span class="string">;[yingouqlj]</span></span><br><span class="line"><span class="string">; comment = PC Directories</span></span><br><span class="line"><span class="string">; path = /usr/local/pc/%m</span></span><br><span class="line"><span class="string">; public = no</span></span><br><span class="line"><span class="string">; writable = yes</span></span><br><span class="line"><span class="string">公共可访问的目录，对所有的用户都可读/写。注意：在这个目录中的所有由用户创建的文件都会被标识成默认用户所有。所以有访问仅限的用户可以删除别的用户的文件。很明显这个目录必须是可以被默认用户写的。另一个用户当然可以指定，这样所有的文件都将被那个用户所替代。</span></span><br><span class="line"><span class="string">[public]</span></span><br><span class="line"><span class="string">path = /tmp/aaaa</span></span><br><span class="line"><span class="string">public = yes</span></span><br><span class="line"><span class="string">guest ok = yes</span></span><br><span class="line"><span class="string">writable = yes</span></span><br><span class="line"><span class="string">printable = no</span></span><br><span class="line"><span class="string">下面的两个例子是怎样共享一个目录给两个用户，在这个共享目录中他们可以放置文件且分别属于各自所有。在这个设置中，目录将可以被两个用户同时使用且在其上有粘滞位保护。很明显，可以扩展为多个用户的情况。</span></span><br><span class="line"><span class="string">;[myshare]</span></span><br><span class="line"><span class="string">; comment = Mary’s and Fred’s stuff</span></span><br><span class="line"><span class="string">; path = /usr/somewhere/shared</span></span><br><span class="line"><span class="string">; valid users = mary fred</span></span><br><span class="line"><span class="string">; public = no</span></span><br><span class="line"><span class="string">; writable = yes</span></span><br><span class="line"><span class="string">; printable = no</span></span><br><span class="line"><span class="string">; create mask = 0765</span></span><br><span class="line"><span class="string">以下是个人实际的设置</span></span><br><span class="line"><span class="string">[sharedir]</span></span><br><span class="line"><span class="string">path = /home/nw</span></span><br><span class="line"><span class="string">public = yes</span></span><br><span class="line"><span class="string">guest ok = yes</span></span><br><span class="line"><span class="string">writable = yes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">在RHEL下如何使用VPN？怎么往一个Samba(SMB)共享里添加一个用户？  2007-09-10 21:28:13|  分类： 默认分类 |  标签： |字号大中小 订阅 </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">允许用户浏览Samba共享的一种方法是在Samba服务器上拥有一个UNIX帐号。可以通过命令 adduser [用户名] 和 passwd [用户名]来建立UNIX帐号。 </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">当用户有了一个本地帐号，他的Samba密码可以这样初始化： </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    smbpasswd -a [用户名]-a选项增加用户名到Samba的密码文件里面里。 </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">在/etc/smb.conf配置文件里修改Samba共享，允许新增加的用户浏览该共享资源。 </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[ashare]    comment = A Shared Directory    path = /usr/somewhere/shared    valid users = mary [新用户]    public = no    writable = yes用testparm显示升级后的共享资源。</span></span><br><span class="line"><span class="string">用service smb reload命令重载smb.conf配置文件。 </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">-- Create the user </span></span><br><span class="line"><span class="string">create user NC56</span></span><br><span class="line"><span class="string">  identified by "nc56"</span></span><br><span class="line"><span class="string">  default tablespace NNC_DATA01</span></span><br><span class="line"><span class="string">  temporary tablespace TEMP</span></span><br><span class="line"><span class="string">  profile DEFAULT;</span></span><br><span class="line"><span class="string">-- Grant/Revoke role privileges </span></span><br><span class="line"><span class="string">grant connect to NC56 with admin option;</span></span><br><span class="line"><span class="string">grant dba     to NC56 with admin option;</span></span><br></pre></td></tr></table></figure>
<h4 id="Linux-压缩命令汇总"><a href="#Linux-压缩命令汇总" class="headerlink" title="Linux 压缩命令汇总"></a>Linux 压缩命令汇总</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line">09在Windows下最常见的压缩文件就只有两种，一是,zip，另一个是.rar。可是Linux就不同了，它有.gz、.tar.gz、tgz、bz2、.Z、.tar等众多的压缩文件名，此外windows下的.zip和.rar也可以在Linux下使用，不过在Linux使用.zip和.rar的人就太少了。本文就来对这些常见的压缩文件进行一</span><br><span class="line">番小结，希望你下次遇到这些文件时不至于被搞晕icon_smile.gif</span><br><span class="line"></span><br><span class="line">　　在具体总结各类压缩文件之前呢，首先要弄清两个概念：打包和压缩。打包是指</span><br><span class="line">将一大堆文件或目录什么的变成一个总的文件，压缩则是将一个大的文件通过一些压</span><br><span class="line">缩算法变成一个小文件。为什么要区分这两个概念呢？其实这源于Linux中的很多压</span><br><span class="line">缩程序只能针对一个文件进行压缩，这样当你想要压缩一大堆文件时，你就得先借助</span><br><span class="line">另它的工具将这一大堆文件先打成一个包，然后再就原来的压缩程序进行压缩。</span><br><span class="line"></span><br><span class="line">　　Linux下最常用的打包程序就是tar了，使用tar程序打出来的包我们常称为tar包</span><br><span class="line">，tar包文件的命令通常都是以.tar结尾的。生成tar包后，就可以用其它的程序来进</span><br><span class="line">行压缩了，所以首先就来讲讲tar命令的基本用法：</span><br><span class="line"></span><br><span class="line">　　tar命令的选项有很多(用man tar可以查看到)，但常用的就那么几个选项，下面</span><br><span class="line">来举例说明一下：</span><br><span class="line"></span><br><span class="line">　　<span class="comment"># tar -cf all.tar *.jpg</span></span><br><span class="line">　　这条命令是将所有.jpg的文件打成一个名为all.tar的包。-c是表示产生新的包</span><br><span class="line">，-f指定包的文件名。</span><br><span class="line"></span><br><span class="line">　　<span class="comment"># tar -rf all.tar *.gif</span></span><br><span class="line">　　这条命令是将所有.gif的文件增加到all.tar的包里面去。-r是表示增加文件的</span><br><span class="line">意思。</span><br><span class="line"><span class="comment"># tar -uf all.tar logo.gif</span></span><br><span class="line">　　这条命令是更新原来tar包all.tar中logo.gif文件，-u是表示更新文件的意思。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">　　<span class="comment"># tar -tf all.tar</span></span><br><span class="line">　　这条命令是列出all.tar包中所有文件，-t是列出文件的意思</span><br><span class="line"></span><br><span class="line">　　<span class="comment"># tar -xf all.tar</span></span><br><span class="line">　　这条命令是解出all.tar包中所有文件，-x是解开的意思</span><br><span class="line"></span><br><span class="line">　　以上就是tar的最基本的用法。为了方便用户在打包解包的同时可以压缩或解压</span><br><span class="line">文件，tar提供了一种特殊的功能。这就是tar可以在打包或解包的同时调用其它的压</span><br><span class="line">缩程序，比如调用gzip、bzip2等。</span><br><span class="line"></span><br><span class="line">　　1) tar调用gzip</span><br><span class="line"></span><br><span class="line">　　gzip是GNU组织开发的一个压缩程序，.gz结尾的文件就是gzip压缩的结果。与gzip</span><br><span class="line">相对的解压程序是gunzip。tar中使用-z这个参数来调用gzip。下面来举例说明一下</span><br><span class="line">：</span><br><span class="line"></span><br><span class="line">　　<span class="comment"># tar -czf all.tar.gz *.jpg</span></span><br><span class="line">　　这条命令是将所有.jpg的文件打成一个tar包，并且将其用gzip压缩，生成一个</span><br><span class="line">gzip压缩过的包，包名为all.tar.gz</span><br><span class="line"></span><br><span class="line">　　<span class="comment"># tar -xzf all.tar.gz</span></span><br><span class="line">　　这条命令是将上面产生的包解开。</span><br><span class="line"></span><br><span class="line">　　2) tar调用bzip2</span><br><span class="line"></span><br><span class="line">　　bzip2是一个压缩能力更强的压缩程序，.bz2结尾的文件就是bzip2压缩的结果。</span><br><span class="line">与bzip2相对的解压程序是bunzip2。tar中使用-j这个参数来调用gzip。下面来举例</span><br><span class="line">说明一下：</span><br><span class="line"></span><br><span class="line">　　<span class="comment"># tar -cjf all.tar.bz2 *.jpg</span></span><br><span class="line">　　这条命令是将所有.jpg的文件打成一个tar包，并且将其用bzip2压缩，生成一个</span><br><span class="line">bzip2压缩过的包，包名为all.tar.bz2</span><br><span class="line"></span><br><span class="line">　　<span class="comment"># tar -xjf all.tar.bz2</span></span><br><span class="line">　　这条命令是将上面产生的包解开。</span><br><span class="line">3)tar调用compress</span><br><span class="line"></span><br><span class="line">　　compress也是一个压缩程序，但是好象使用compress的人不如gzip和bzip2的人</span><br><span class="line">多。.Z结尾的文件就是bzip2压缩的结果。与 compress相对的解压程序是uncompress</span><br><span class="line">。tar中使用-Z这个参数来调用compress。下面来举例说明一下：</span><br><span class="line"></span><br><span class="line">　　<span class="comment"># tar -cZf all.tar.Z *.jpg</span></span><br><span class="line">　　这条命令是将所有.jpg的文件打成一个tar包，并且将其用compress压缩，生成</span><br><span class="line">一个uncompress压缩过的包，包名为all.tar.Z</span><br><span class="line"></span><br><span class="line">　　<span class="comment"># tar -xZf all.tar.Z</span></span><br><span class="line">　　这条命令是将上面产生的包解开</span><br><span class="line"></span><br><span class="line">　　有了上面的知识，你应该可以解开多种压缩文件了，下面对于tar系列的压缩文</span><br><span class="line">件作一个小结：</span><br><span class="line"></span><br><span class="line">　　1)对于.tar结尾的文件</span><br><span class="line"></span><br><span class="line">　　tar -xf all.tar</span><br><span class="line"></span><br><span class="line">　　2)对于.gz结尾的文件</span><br><span class="line"></span><br><span class="line">　　gzip -d all.gz</span><br><span class="line">　　gunzip all.gz</span><br><span class="line"></span><br><span class="line">　　3)对于.tgz或.tar.gz结尾的文件</span><br><span class="line"></span><br><span class="line">　　tar -xzf all.tar.gz</span><br><span class="line">　　tar -xzf all.tgz</span><br><span class="line"></span><br><span class="line">　　4)对于.bz2结尾的文件</span><br><span class="line"></span><br><span class="line">　　bzip2 -d all.bz2</span><br><span class="line">　　bunzip2 all.bz2</span><br><span class="line"></span><br><span class="line">　　5)对于tar.bz2结尾的文件</span><br><span class="line"></span><br><span class="line">　　tar -xjf all.tar.bz2</span><br><span class="line"></span><br><span class="line">　　6)对于.Z结尾的文件</span><br><span class="line"></span><br><span class="line">　　uncompress all.Z</span><br><span class="line"></span><br><span class="line">　　7)对于.tar.Z结尾的文件</span><br><span class="line"></span><br><span class="line">　　tar -xZf all.tar.z</span><br><span class="line"></span><br><span class="line">　　另外对于Window下的常见压缩文件.zip和.rar，Linux也有相应的方法来解压它</span><br><span class="line">们：</span><br><span class="line"></span><br><span class="line">　　1)对于.zip</span><br><span class="line"></span><br><span class="line">　　linux下提供了zip和unzip程序，zip是压缩程序，unzip是解压程序。它们的参</span><br><span class="line">数选项很多，这里只做简单介绍，依旧举例说明一下其用法：</span><br><span class="line"></span><br><span class="line">　　<span class="comment"># zip all.zip *.jpg</span></span><br><span class="line">　　这条命令是将所有.jpg的文件压缩成一个zip包</span><br><span class="line"><span class="comment"># unzip all.zip</span></span><br><span class="line">　　这条命令是将all.zip中的所有文件解压出来</span><br><span class="line"></span><br><span class="line">　　2)对于.rar</span><br><span class="line"></span><br><span class="line">　　要在linux下处理.rar文件，需要安装RAR <span class="keyword">for</span> Linux，可以从网上下载，但要记</span><br><span class="line">住，RAR <span class="keyword">for</span> Linux</span><br><span class="line">不是免费的；可从[url]http://www.rarsoft.com/download.htm[/url]下载RARfor Linux 3.2.</span><br><span class="line">0，然后安装：</span><br><span class="line"></span><br><span class="line">　　<span class="comment"># tar -xzpvf rarlinux-3.2.0.tar.gz</span></span><br><span class="line">　　<span class="comment"># cd rar</span></span><br><span class="line">　　<span class="comment"># make</span></span><br><span class="line"></span><br><span class="line">　　这样就安装好了，安装后就有了rar和unrar这两个程序，rar是压缩程序，unrar</span><br><span class="line">是解压程序。它们的参数选项很多，这里只做简单介绍，依旧举例说明一下其用法：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">　　<span class="comment"># rar a all *.jpg</span></span><br><span class="line">　　这条命令是将所有.jpg的文件压缩成一个rar包，名为all.rar，该程序会将.rar</span><br><span class="line">扩展名将自动附加到包名后。</span><br><span class="line"></span><br><span class="line">　　<span class="comment"># unrar e all.rar</span></span><br><span class="line">　　这条命令是将all.rar中的所有文件解压出来</span><br><span class="line"></span><br><span class="line">　　到此为至，我们已经介绍过linux下的tar、gzip、gunzip、bzip2、bunzip2、compress</span><br><span class="line">、 uncompress、 zip、unzip、rar、unrar等程式，你应该已经能够使用它们对.tar</span><br><span class="line">、.gz、.tar.gz、.tgz、.bz2、.tar.bz2、. Z、.tar.Z、.zip、.rar这10种压缩文</span><br><span class="line">件进行解压了，以后应该不需要为下载了一个软件而不知道如何在Linux下解开而烦</span><br><span class="line">恼了。而且以上方法对于Unix也基本有效。</span><br><span class="line"></span><br><span class="line">　　本文介绍了linux下的压缩程式tar、gzip、gunzip、bzip2、bunzip2、compress</span><br><span class="line">、uncompress、 zip、 unzip、rar、unrar等程式，以及如何使用它们对.tar、.gz</span><br><span class="line">、.tar.gz、.tgz、.bz2、.tar.bz2、.Z、. tar.Z、.zip、.rar这10种压缩文件进行</span><br><span class="line">操作。</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Shell/" rel="tag"># Shell</a>
          
            <a href="/tags/Linux/" rel="tag"># Linux</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/08/24/Oracle-chongyongmingling/" rel="next" title="Oracle 常用命令">
                <i class="fa fa-chevron-left"></i> Oracle 常用命令
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/08/25/jishuwenzhangshoucang/" rel="prev" title="技术文章收藏">
                技术文章收藏 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Limq</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">26</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    <span class="site-state-item-count">20</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/limqvip" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:gzlmq1@163.com" target="_blank" title="邮箱">
                      
                        <i class="fa fa-fw fa-envelope"></i>邮箱</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.sina.com" title="新浪" target="_blank">新浪</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#第一讲"><span class="nav-number">1.</span> <span class="nav-text">第一讲</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第二讲"><span class="nav-number">2.</span> <span class="nav-text">第二讲</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第三讲-Shell-输入与输出"><span class="nav-number">3.</span> <span class="nav-text">第三讲 Shell 输入与输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第四讲-控制流结构"><span class="nav-number">4.</span> <span class="nav-text">第四讲 控制流结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第五讲"><span class="nav-number">5.</span> <span class="nav-text">第五讲</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第六讲shell函数"><span class="nav-number">6.</span> <span class="nav-text">第六讲shell函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第七讲脚本参数传递"><span class="nav-number">7.</span> <span class="nav-text">第七讲脚本参数传递</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#常用命令"><span class="nav-number">7.0.1.</span> <span class="nav-text">常用命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#linux使用备忘"><span class="nav-number">7.0.2.</span> <span class="nav-text">linux使用备忘</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#压缩文件："><span class="nav-number">7.0.3.</span> <span class="nav-text">压缩文件：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查找文件："><span class="nav-number">7.0.4.</span> <span class="nav-text">查找文件：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#目录"><span class="nav-number">7.1.</span> <span class="nav-text">目录</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-ln-命令详解"><span class="nav-number">7.1.1.</span> <span class="nav-text">1.ln 命令详解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux-压缩命令汇总"><span class="nav-number">7.1.2.</span> <span class="nav-text">Linux 压缩命令汇总</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Limq</span>

  

  
</div>




<


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Mist</a> v6.0.1</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i> 访问人数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i> 总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.1"></script>



  



	





  





  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
